(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1261:function(s,t,a){s.exports=a.p+"assets/img/image-20210720193623245.2d1d755c.png"},1262:function(s,t,a){s.exports=a.p+"assets/img/image-20210720193633483.0a040fef.png"},1263:function(s,t,a){s.exports=a.p+"assets/img/image-20210720193641907.c1dcaa28.png"},1264:function(s,t,a){s.exports=a.p+"assets/img/image-20210720193648044.99c0abdf.png"},1265:function(s,t,a){s.exports=a.p+"assets/img/image-20210720194008781.52d7d424.png"},1266:function(s,t,a){s.exports=a.p+"assets/img/image-20210720194230265.af4aaf54.png"},1267:function(s,t,a){s.exports=a.p+"assets/img/image-20210720194547780.c036ecf2.png"},1268:function(s,t,a){s.exports=a.p+"assets/img/image-20210720195001221.b07c5a62.png"},1269:function(s,t,a){s.exports=a.p+"assets/img/image-20210720195142535.988fc622.png"},1270:function(s,t,a){s.exports=a.p+"assets/img/image-20210720195306484.0b999352.png"},1271:function(s,t,a){s.exports=a.p+"assets/img/image-20210720195531539.5fb4020f.png"},1272:function(s,t,a){s.exports=a.p+"assets/img/image-20210720200457207.d4e467b0.png"},1273:function(s,t,a){s.exports=a.p+"assets/img/image-20210720201115192.035bf5ba.png"},1274:function(s,t,a){s.exports=a.p+"assets/img/image-20210720202707797.318d50b7.png"},1275:function(s,t,a){s.exports=a.p+"assets/img/image-20210720203022172.c1184e37.png"},1276:function(s,t,a){s.exports=a.p+"assets/img/image-20210720203534945.92885d03.png"},1277:function(s,t,a){s.exports=a.p+"assets/img/image-20210720211019329.380a03fc.png"},1278:function(s,t,a){s.exports=a.p+"assets/img/image-20210720212357390.a1ad9d17.png"},1279:function(s,t,a){s.exports=a.p+"assets/img/image-20210720212123420.d413f003.png"},1280:function(s,t,a){s.exports=a.p+"assets/img/image-20210720212933362.4dffe65c.png"},1281:function(s,t,a){s.exports=a.p+"assets/img/image-20210720213345003.90271358.png"},1282:function(s,t,a){s.exports=a.p+"assets/img/image-20210720213634918.6de90e87.png"},1283:function(s,t,a){s.exports=a.p+"assets/img/image-20210720214555863.7bae3ecb.png"},1284:function(s,t){s.exports="data:image/png;base64,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"},1285:function(s,t){s.exports="data:image/png;base64,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"},1286:function(s,t,a){s.exports=a.p+"assets/img/image-20210720220647541.39d47f42.png"},1287:function(s,t,a){s.exports=a.p+"assets/img/image-20210720222110126.7360702d.png"},1288:function(s,t,a){s.exports=a.p+"assets/img/image-20210720222221516.125d32d4.png"},1289:function(s,t,a){s.exports=a.p+"assets/img/image-20210720223049408.b7918e43.png"},1290:function(s,t,a){s.exports=a.p+"assets/img/image-20210720230027240.d085d94a.png"},1291:function(s,t,a){s.exports=a.p+"assets/img/image-20210720230811674.a8ab4919.png"},1292:function(s,t,a){s.exports=a.p+"assets/img/image-20210720231040875.09ee45d6.png"},1293:function(s,t,a){s.exports=a.p+"assets/img/image-20210720232105943.a1394986.png"},1294:function(s,t,a){s.exports=a.p+"assets/img/image-20210720232431383.a406babb.png"},1810:function(s,t,a){"use strict";a.r(t);var n=a(1),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"分布式搜索引擎"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#分布式搜索引擎"}},[s._v("#")]),s._v(" 分布式搜索引擎")]),s._v(" "),n("h1",{attrs:{id:"_1-初识elasticsearch"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-初识elasticsearch"}},[s._v("#")]),s._v(" 1.初识elasticsearch")]),s._v(" "),n("h2",{attrs:{id:"_1-1-了解es"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-了解es"}},[s._v("#")]),s._v(" 1.1.了解ES")]),s._v(" "),n("h2",{attrs:{id:"应用场景"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#应用场景"}},[s._v("#")]),s._v(" 应用场景")]),s._v(" "),n("ul",[n("li",[s._v("日志实时分析")]),s._v(" "),n("li",[s._v("搜索服务")]),s._v(" "),n("li",[s._v("数据分析")]),s._v(" "),n("li",[s._v("数据监控")]),s._v(" "),n("li",[s._v("查询服务")]),s._v(" "),n("li",[s._v("后端存储")])]),s._v(" "),n("p",[n("a",{attrs:{href:"https://blog.csdn.net/weixin_39897828/article/details/106496017",target:"_blank",rel:"noopener noreferrer"}},[s._v("七个生产案例告诉你ElasticSearch的应用场景和优势！_elasticsearch优点_可怜-白发生的博客-CSDN博客"),n("OutboundLink")],1)]),s._v(" "),n("h3",{attrs:{id:"_1-1-1-elasticsearch的作用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-1-elasticsearch的作用"}},[s._v("#")]),s._v(" 1.1.1.elasticsearch的作用")]),s._v(" "),n("p",[s._v("elasticsearch是一款非常强大的开源搜索引擎，具备非常多强大功能，可以帮助我们从海量数据中快速找到需要的内容")]),s._v(" "),n("p",[s._v("例如：")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("在GitHub搜索代码")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1261),alt:"image-20210720193623245"}})])]),s._v(" "),n("li",[n("p",[s._v("在电商网站搜索商品")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1262),alt:"image-20210720193633483"}})])]),s._v(" "),n("li",[n("p",[s._v("在百度搜索答案")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1263),alt:"image-20210720193641907"}})])]),s._v(" "),n("li",[n("p",[s._v("在打车软件搜索附近的车")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1264),alt:"image-20210720193648044"}})])])]),s._v(" "),n("h3",{attrs:{id:"_1-1-2-elk技术栈"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-2-elk技术栈"}},[s._v("#")]),s._v(" 1.1.2.ELK技术栈")]),s._v(" "),n("p",[s._v("elasticsearch结合kibana、Logstash、Beats，也就是elastic stack（ELK）。被广泛应用在日志数据分析、实时监控等领域：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1265),alt:"image-20210720194008781"}})]),s._v(" "),n("p",[s._v("而elasticsearch是elastic stack的核心，负责存储、搜索、分析数据。")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1266),alt:"image-20210720194230265"}})]),s._v(" "),n("h3",{attrs:{id:"_1-1-3-elasticsearch和lucene"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-3-elasticsearch和lucene"}},[s._v("#")]),s._v(" 1.1.3.elasticsearch和lucene")]),s._v(" "),n("p",[s._v("elasticsearch底层是基于"),n("strong",[s._v("lucene")]),s._v("来实现的。")]),s._v(" "),n("p",[n("strong",[s._v("Lucene")]),s._v("是一个Java语言的搜索引擎类库，是Apache公司的顶级项目，由DougCutting于1999年研发。官网地址：https://lucene.apache.org/ 。")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1267),alt:"image-20210720194547780"}})]),s._v(" "),n("p",[n("strong",[s._v("elasticsearch")]),s._v("的发展历史：")]),s._v(" "),n("ul",[n("li",[s._v("2004年Shay Banon基于Lucene开发了Compass")]),s._v(" "),n("li",[s._v("2010年Shay Banon 重写了Compass，取名为Elasticsearch。")])]),s._v(" "),n("p",[n("img",{attrs:{src:a(1268),alt:"image-20210720195001221"}})]),s._v(" "),n("h3",{attrs:{id:"_1-1-4-为什么不是其他搜索技术"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-4-为什么不是其他搜索技术"}},[s._v("#")]),s._v(" 1.1.4.为什么不是其他搜索技术？")]),s._v(" "),n("p",[s._v("目前比较知名的搜索引擎技术排名：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1269),alt:"image-20210720195142535"}})]),s._v(" "),n("p",[s._v("虽然在早期，Apache Solr是最主要的搜索引擎技术，但随着发展elasticsearch已经渐渐超越了Solr，独占鳌头：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1270),alt:"image-20210720195306484"}})]),s._v(" "),n("h3",{attrs:{id:"_1-1-5-总结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-5-总结"}},[s._v("#")]),s._v(" 1.1.5.总结")]),s._v(" "),n("p",[s._v("什么是elasticsearch？")]),s._v(" "),n("ul",[n("li",[s._v("一个开源的分布式搜索引擎，可以用来实现搜索、日志统计、分析、系统监控等功能")])]),s._v(" "),n("p",[s._v("什么是elastic stack（ELK）？")]),s._v(" "),n("ul",[n("li",[s._v("是以elasticsearch为核心的技术栈，包括beats、Logstash、kibana、elasticsearch")])]),s._v(" "),n("p",[s._v("什么是Lucene？")]),s._v(" "),n("ul",[n("li",[s._v("是Apache的开源搜索引擎类库，提供了搜索引擎的核心API")])]),s._v(" "),n("h2",{attrs:{id:"_1-2-倒排索引"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-倒排索引"}},[s._v("#")]),s._v(" 1.2.倒排索引")]),s._v(" "),n("p",[s._v("倒排索引的概念是基于MySQL这样的正向索引而言的。")]),s._v(" "),n("h3",{attrs:{id:"_1-2-1-正向索引"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1-正向索引"}},[s._v("#")]),s._v(" 1.2.1.正向索引")]),s._v(" "),n("p",[s._v("那么什么是正向索引呢？例如给下表（tb_goods）中的id创建索引：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1271),alt:"image-20210720195531539"}})]),s._v(" "),n("p",[s._v("如果是根据id查询，那么直接走索引，查询速度非常快。")]),s._v(" "),n("p",[s._v("但如果是基于title做模糊查询，只能是逐行扫描数据，流程如下：")]),s._v(" "),n("p",[s._v("1）用户搜索数据，条件是title符合"),n("code",[s._v('"%手机%"')])]),s._v(" "),n("p",[s._v("2）逐行获取数据，比如id为1的数据")]),s._v(" "),n("p",[s._v("3）判断数据中的title是否符合用户搜索条件")]),s._v(" "),n("p",[s._v("4）如果符合则放入结果集，不符合则丢弃。回到步骤1")]),s._v(" "),n("p",[s._v("逐行扫描，也就是全表扫描，随着数据量增加，其查询效率也会越来越低。当数据量达到数百万时，就是一场灾难。")]),s._v(" "),n("h3",{attrs:{id:"_1-2-2-倒排索引"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-2-倒排索引"}},[s._v("#")]),s._v(" 1.2.2.倒排索引")]),s._v(" "),n("p",[s._v("倒排索引中有两个非常重要的概念：")]),s._v(" "),n("ul",[n("li",[s._v("文档（"),n("code",[s._v("Document")]),s._v("）：用来搜索的数据，其中的每一条数据就是一个文档。例如一个网页、一个商品信息")]),s._v(" "),n("li",[s._v("词条（"),n("code",[s._v("Term")]),s._v("）：对文档数据或用户搜索数据，利用某种算法分词，得到的具备含义的词语就是词条。例如：我是中国人，就可以分为：我、是、中国人、中国、国人这样的几个词条")])]),s._v(" "),n("p",[n("strong",[s._v("创建倒排索引")]),s._v("是对正向索引的一种特殊处理，流程如下：")]),s._v(" "),n("ul",[n("li",[s._v("将每一个文档的数据利用算法分词，得到一个个词条")]),s._v(" "),n("li",[s._v("创建表，每行数据包括词条、词条所在文档id、位置等信息")]),s._v(" "),n("li",[s._v("因为词条唯一性，可以给词条创建索引，例如hash表结构索引")])]),s._v(" "),n("p",[s._v("如图：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1272),alt:"image-20210720200457207"}})]),s._v(" "),n("p",[s._v("倒排索引的"),n("strong",[s._v("搜索流程")]),s._v('如下（以搜索"华为手机"为例）：')]),s._v(" "),n("p",[s._v("1）用户输入条件"),n("code",[s._v('"华为手机"')]),s._v("进行搜索。")]),s._v(" "),n("p",[s._v("2）对用户输入内容"),n("strong",[s._v("分词")]),s._v("，得到词条："),n("code",[s._v("华为")]),s._v("、"),n("code",[s._v("手机")]),s._v("。")]),s._v(" "),n("p",[s._v("3）拿着词条在倒排索引中查找，可以得到包含词条的文档id：1、2、3。")]),s._v(" "),n("p",[s._v("4）拿着文档id到正向索引中查找具体文档。")]),s._v(" "),n("p",[s._v("如图：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1273),alt:"image-20210720201115192"}})]),s._v(" "),n("p",[s._v("虽然要先查询倒排索引，再查询倒排索引，但是无论是词条、还是文档id都建立了索引，查询速度非常快！无需全表扫描。")]),s._v(" "),n("h3",{attrs:{id:"_1-2-3-正向和倒排"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-3-正向和倒排"}},[s._v("#")]),s._v(" 1.2.3.正向和倒排")]),s._v(" "),n("p",[s._v("那么为什么一个叫做正向索引，一个叫做倒排索引呢？")]),s._v(" "),n("ul",[n("li",[n("p",[n("strong",[s._v("正向索引")]),s._v("是最传统的，根据id索引的方式。但根据词条查询时，必须先逐条获取每个文档，然后判断文档中是否包含所需要的词条，是"),n("strong",[s._v("根据文档找词条的过程")]),s._v("。")])]),s._v(" "),n("li",[n("p",[s._v("而"),n("strong",[s._v("倒排索引")]),s._v("则相反，是先找到用户要搜索的词条，根据词条得到保护词条的文档的id，然后根据id获取文档。是"),n("strong",[s._v("根据词条找文档的过程")]),s._v("。")])])]),s._v(" "),n("p",[s._v("是不是恰好反过来了？")]),s._v(" "),n("p",[s._v("那么两者方式的优缺点是什么呢？")]),s._v(" "),n("p",[n("strong",[s._v("正向索引")]),s._v("：")]),s._v(" "),n("ul",[n("li",[s._v("优点：\n"),n("ul",[n("li",[s._v("可以给多个字段创建索引")]),s._v(" "),n("li",[s._v("根据索引字段搜索、排序速度非常快")])])]),s._v(" "),n("li",[s._v("缺点：\n"),n("ul",[n("li",[s._v("根据非索引字段，或者索引字段中的部分词条查找时，只能全表扫描。")])])])]),s._v(" "),n("p",[n("strong",[s._v("倒排索引")]),s._v("：")]),s._v(" "),n("ul",[n("li",[s._v("优点：\n"),n("ul",[n("li",[s._v("根据词条搜索、模糊搜索时，速度非常快")])])]),s._v(" "),n("li",[s._v("缺点：\n"),n("ul",[n("li",[s._v("只能给词条创建索引，而不是字段")]),s._v(" "),n("li",[s._v("无法根据字段做排序")])])])]),s._v(" "),n("h2",{attrs:{id:"_1-3-es的一些概念"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-es的一些概念"}},[s._v("#")]),s._v(" 1.3.es的一些概念")]),s._v(" "),n("p",[s._v("elasticsearch中有很多独有的概念，与mysql中略有差别，但也有相似之处。")]),s._v(" "),n("h3",{attrs:{id:"_1-3-1-文档和字段"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-1-文档和字段"}},[s._v("#")]),s._v(" 1.3.1.文档和字段")]),s._v(" "),n("p",[s._v("elasticsearch是面向**文档（Document）**存储的，可以是数据库中的一条商品数据，一个订单信息。文档数据会被序列化为json格式后存储在elasticsearch中：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1274),alt:"image-20210720202707797"}})]),s._v(" "),n("p",[s._v("而Json文档中往往包含很多的"),n("strong",[s._v("字段（Field）")]),s._v("，类似于数据库中的列。")]),s._v(" "),n("h3",{attrs:{id:"_1-3-2-索引和映射"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-2-索引和映射"}},[s._v("#")]),s._v(" 1.3.2.索引和映射")]),s._v(" "),n("p",[n("strong",[s._v("索引（Index）")]),s._v("，就是相同类型的文档的集合。")]),s._v(" "),n("p",[s._v("例如：")]),s._v(" "),n("ul",[n("li",[s._v("所有用户文档，就可以组织在一起，称为用户的索引；")]),s._v(" "),n("li",[s._v("所有商品的文档，可以组织在一起，称为商品的索引；")]),s._v(" "),n("li",[s._v("所有订单的文档，可以组织在一起，称为订单的索引；")])]),s._v(" "),n("p",[n("img",{attrs:{src:a(1275),alt:"image-20210720203022172"}})]),s._v(" "),n("p",[s._v("因此，我们可以把索引当做是数据库中的表。")]),s._v(" "),n("p",[s._v("数据库的表会有约束信息，用来定义表的结构、字段的名称、类型等信息。因此，索引库中就有"),n("strong",[s._v("映射（mapping）")]),s._v("，是索引中文档的字段约束信息，类似表的结构约束。")]),s._v(" "),n("h3",{attrs:{id:"_1-3-3-mysql与elasticsearch"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-3-mysql与elasticsearch"}},[s._v("#")]),s._v(" 1.3.3.mysql与elasticsearch")]),s._v(" "),n("p",[s._v("我们统一的把mysql与elasticsearch的概念做一下对比：")]),s._v(" "),n("table",[n("thead",[n("tr",[n("th",[n("strong",[s._v("MySQL")])]),s._v(" "),n("th",[n("strong",[s._v("Elasticsearch")])]),s._v(" "),n("th",[n("strong",[s._v("说明")])])])]),s._v(" "),n("tbody",[n("tr",[n("td",[s._v("Table")]),s._v(" "),n("td",[s._v("Index")]),s._v(" "),n("td",[s._v("索引(index)，就是文档的集合，类似数据库的表(table)")])]),s._v(" "),n("tr",[n("td",[s._v("Row")]),s._v(" "),n("td",[s._v("Document")]),s._v(" "),n("td",[s._v("文档（Document），就是一条条的数据，类似数据库中的行（Row），文档都是JSON格式")])]),s._v(" "),n("tr",[n("td",[s._v("Column")]),s._v(" "),n("td",[s._v("Field")]),s._v(" "),n("td",[s._v("字段（Field），就是JSON文档中的字段，类似数据库中的列（Column）")])]),s._v(" "),n("tr",[n("td",[s._v("Schema")]),s._v(" "),n("td",[s._v("Mapping")]),s._v(" "),n("td",[s._v("Mapping（映射）是索引中文档的约束，例如字段类型约束。类似数据库的表结构（Schema）")])]),s._v(" "),n("tr",[n("td",[s._v("SQL")]),s._v(" "),n("td",[s._v("DSL")]),s._v(" "),n("td",[s._v("DSL是elasticsearch提供的JSON风格的请求语句，用来操作elasticsearch，实现CRUD")])])])]),s._v(" "),n("p",[s._v("是不是说，我们学习了elasticsearch就不再需要mysql了呢？")]),s._v(" "),n("p",[s._v("并不是如此，两者各自有自己的擅长支出：")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("Mysql：擅长事务类型操作，可以确保数据的安全和一致性")])]),s._v(" "),n("li",[n("p",[s._v("Elasticsearch：擅长海量数据的搜索、分析、计算")])])]),s._v(" "),n("p",[s._v("因此在企业中，往往是两者结合使用：")]),s._v(" "),n("ul",[n("li",[s._v("对安全性要求较高的写操作，使用mysql实现")]),s._v(" "),n("li",[s._v("对查询性能要求较高的搜索需求，使用elasticsearch实现")]),s._v(" "),n("li",[s._v("两者再基于某种方式，实现数据的同步，保证一致性")])]),s._v(" "),n("p",[n("img",{attrs:{src:a(1276),alt:"image-20210720203534945"}})]),s._v(" "),n("h2",{attrs:{id:"_1-4-安装es、kibana"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-安装es、kibana"}},[s._v("#")]),s._v(" 1.4.安装es、kibana")]),s._v(" "),n("h3",{attrs:{id:"_1-4-1-安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-1-安装"}},[s._v("#")]),s._v(" 1.4.1.安装")]),s._v(" "),n("p",[s._v("参考课前资料：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(376),alt:"image-20210720203805350"}})]),s._v(" "),n("h3",{attrs:{id:"_1-4-2-分词器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-2-分词器"}},[s._v("#")]),s._v(" 1.4.2.分词器")]),s._v(" "),n("p",[s._v("参考课前资料：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(376),alt:"image-20210720203805350"}})]),s._v(" "),n("h3",{attrs:{id:"_1-4-3-总结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-3-总结"}},[s._v("#")]),s._v(" 1.4.3.总结")]),s._v(" "),n("p",[s._v("分词器的作用是什么？")]),s._v(" "),n("ul",[n("li",[s._v("创建倒排索引时对文档分词")]),s._v(" "),n("li",[s._v("用户搜索时，对输入的内容分词")])]),s._v(" "),n("p",[s._v("IK分词器有几种模式？")]),s._v(" "),n("ul",[n("li",[s._v("ik_smart：智能切分，粗粒度")]),s._v(" "),n("li",[s._v("ik_max_word：最细切分，细粒度")])]),s._v(" "),n("p",[s._v("IK分词器如何拓展词条？如何停用词条？")]),s._v(" "),n("ul",[n("li",[s._v("利用config目录的IkAnalyzer.cfg.xml文件添加拓展词典和停用词典")]),s._v(" "),n("li",[s._v("在词典中添加拓展词条或者停用词条")])]),s._v(" "),n("h1",{attrs:{id:"_2-索引库操作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-索引库操作"}},[s._v("#")]),s._v(" 2.索引库操作")]),s._v(" "),n("p",[s._v("索引库就类似数据库表，mapping映射就类似表的结构。")]),s._v(" "),n("p",[s._v("我们要向es中存储数据，必须先创建“库”和“表”。")]),s._v(" "),n("h2",{attrs:{id:"_2-1-mapping映射属性"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-mapping映射属性"}},[s._v("#")]),s._v(" 2.1.mapping映射属性")]),s._v(" "),n("p",[s._v("mapping是对索引库中文档的约束，常见的mapping属性包括：")]),s._v(" "),n("ul",[n("li",[s._v("type：字段数据类型，常见的简单类型有：\n"),n("ul",[n("li",[s._v("字符串：text（可分词的文本）、keyword（精确值，例如：品牌、国家、ip地址）")]),s._v(" "),n("li",[s._v("数值：long、integer、short、byte、double、float、")]),s._v(" "),n("li",[s._v("布尔：boolean")]),s._v(" "),n("li",[s._v("日期：date")]),s._v(" "),n("li",[s._v("对象：object")])])]),s._v(" "),n("li",[s._v("index：是否创建索引，默认为true")]),s._v(" "),n("li",[s._v("analyzer：使用哪种分词器")]),s._v(" "),n("li",[s._v("properties：该字段的子字段")])]),s._v(" "),n("p",[s._v("例如下面的json文档：")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"age"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"weight"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("52.1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"isMarried"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"info"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"黑马程序员Java讲师"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"email"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zy@itcast.cn"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"score"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("99.1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("99.5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("98.9")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"firstName"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"云"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"lastName"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"赵"')]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("p",[s._v("对应的每个字段映射（mapping）：")]),s._v(" "),n("ul",[n("li",[s._v("age：类型为 integer；参与搜索，因此需要index为true；无需分词器")]),s._v(" "),n("li",[s._v("weight：类型为float；参与搜索，因此需要index为true；无需分词器")]),s._v(" "),n("li",[s._v("isMarried：类型为boolean；参与搜索，因此需要index为true；无需分词器")]),s._v(" "),n("li",[s._v("info：类型为字符串，需要分词，因此是text；参与搜索，因此需要index为true；分词器可以用ik_smart")]),s._v(" "),n("li",[s._v("email：类型为字符串，但是不需要分词，因此是keyword；不参与搜索，因此需要index为false；无需分词器")]),s._v(" "),n("li",[s._v("score：虽然是数组，但是我们只看元素的类型，类型为float；参与搜索，因此需要index为true；无需分词器")]),s._v(" "),n("li",[s._v("name：类型为object，需要定义多个子属性\n"),n("ul",[n("li",[s._v("name.firstName；类型为字符串，但是不需要分词，因此是keyword；参与搜索，因此需要index为true；无需分词器")]),s._v(" "),n("li",[s._v("name.lastName；类型为字符串，但是不需要分词，因此是keyword；参与搜索，因此需要index为true；无需分词器")])])])]),s._v(" "),n("h2",{attrs:{id:"_2-2-索引库的crud"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-索引库的crud"}},[s._v("#")]),s._v(" 2.2.索引库的CRUD")]),s._v(" "),n("p",[s._v("这里我们统一使用Kibana编写DSL的方式来演示。")]),s._v(" "),n("h3",{attrs:{id:"_2-2-1-创建索引库和映射"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-1-创建索引库和映射"}},[s._v("#")]),s._v(" 2.2.1.创建索引库和映射")]),s._v(" "),n("h4",{attrs:{id:"基本语法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#基本语法"}},[s._v("#")]),s._v(" 基本语法：")]),s._v(" "),n("ul",[n("li",[s._v("请求方式：PUT")]),s._v(" "),n("li",[s._v("请求路径：/索引库名，可以自定义")]),s._v(" "),n("li",[s._v("请求参数：mapping映射")])]),s._v(" "),n("p",[s._v("格式：")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("PUT /索引库名称\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"mappings"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"properties"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"字段名"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"text"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"analyzer"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ik_smart"')]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"字段名2"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"keyword"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"index"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"false"')]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"字段名3"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"properties"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"子字段"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"keyword"')]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...略")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br")])]),n("h4",{attrs:{id:"示例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[s._v("#")]),s._v(" 示例：")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("PUT /heima\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mappings"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"properties"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"info"')]),s._v(":"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"text"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"analyzer"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ik_smart"')]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n      "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"email"')]),s._v(":"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"keyword"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"falsae"')]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n      "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),s._v(":"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"properties"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"firstName"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"keyword"')]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n      // "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". 略\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br")])]),n("h3",{attrs:{id:"_2-2-2-查询索引库"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-2-查询索引库"}},[s._v("#")]),s._v(" 2.2.2.查询索引库")]),s._v(" "),n("p",[n("strong",[s._v("基本语法")]),s._v("：")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("请求方式：GET")])]),s._v(" "),n("li",[n("p",[s._v("请求路径：/索引库名")])]),s._v(" "),n("li",[n("p",[s._v("请求参数：无")])])]),s._v(" "),n("p",[n("strong",[s._v("格式")]),s._v("：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("GET /索引库名\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("strong",[s._v("示例")]),s._v("：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1277),alt:"image-20210720211019329"}})]),s._v(" "),n("h3",{attrs:{id:"_2-2-3-修改索引库"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-3-修改索引库"}},[s._v("#")]),s._v(" 2.2.3.修改索引库")]),s._v(" "),n("p",[s._v("倒排索引结构虽然不复杂，但是一旦数据结构改变（比如改变了分词器），就需要重新创建倒排索引，这简直是灾难。因此索引库"),n("strong",[s._v("一旦创建，无法修改mapping")]),s._v("。")]),s._v(" "),n("p",[s._v("虽然无法修改mapping中已有的字段，但是却允许添加新的字段到mapping中，因为不会对倒排索引产生影响。")]),s._v(" "),n("p",[n("strong",[s._v("语法说明")]),s._v("：")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("PUT /索引库名/_mapping\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"properties"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"新字段名"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"integer"')]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[n("strong",[s._v("示例")]),s._v("：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1278),alt:"image-20210720212357390"}})]),s._v(" "),n("h3",{attrs:{id:"_2-2-4-删除索引库"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-4-删除索引库"}},[s._v("#")]),s._v(" 2.2.4.删除索引库")]),s._v(" "),n("p",[n("strong",[s._v("语法：")])]),s._v(" "),n("ul",[n("li",[n("p",[s._v("请求方式：DELETE")])]),s._v(" "),n("li",[n("p",[s._v("请求路径：/索引库名")])]),s._v(" "),n("li",[n("p",[s._v("请求参数：无")])])]),s._v(" "),n("p",[n("strong",[s._v("格式：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("DELETE /索引库名\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("在kibana中测试：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1279),alt:"image-20210720212123420"}})]),s._v(" "),n("h3",{attrs:{id:"_2-2-5-总结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-5-总结"}},[s._v("#")]),s._v(" 2.2.5.总结")]),s._v(" "),n("p",[s._v("索引库操作有哪些？")]),s._v(" "),n("ul",[n("li",[s._v("创建索引库：PUT /索引库名")]),s._v(" "),n("li",[s._v("查询索引库：GET /索引库名")]),s._v(" "),n("li",[s._v("删除索引库：DELETE /索引库名")]),s._v(" "),n("li",[s._v("添加字段：PUT /索引库名/_mapping")])]),s._v(" "),n("h1",{attrs:{id:"_3-文档操作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-文档操作"}},[s._v("#")]),s._v(" 3.文档操作")]),s._v(" "),n("h2",{attrs:{id:"_3-1-新增文档"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-新增文档"}},[s._v("#")]),s._v(" 3.1.新增文档")]),s._v(" "),n("p",[n("strong",[s._v("语法：")])]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("POST /索引库名/_doc/文档id\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"字段1"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"值1"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"字段2"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"值2"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"字段3"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"子属性1"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"值3"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"子属性2"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"值4"')]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[n("strong",[s._v("示例：")])]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("POST /heima/_doc/"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"info"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"黑马程序员Java讲师"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"email"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zy@itcast.cn"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"firstName"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"云"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"lastName"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"赵"')]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[n("strong",[s._v("响应：")])]),s._v(" "),n("p",[n("img",{attrs:{src:a(1280),alt:"image-20210720212933362"}})]),s._v(" "),n("h2",{attrs:{id:"_3-2-查询文档"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-查询文档"}},[s._v("#")]),s._v(" 3.2.查询文档")]),s._v(" "),n("p",[s._v("根据rest风格，新增是post，查询应该是get，不过查询一般都需要条件，这里我们把文档id带上。")]),s._v(" "),n("p",[n("strong",[s._v("语法：")])]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("GET /"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("索引库名称"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("/_doc/"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("strong",[s._v("通过kibana查看数据：")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("GET")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("heima"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("_doc"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("strong",[s._v("查看结果：")])]),s._v(" "),n("p",[n("img",{attrs:{src:a(1281),alt:"image-20210720213345003"}})]),s._v(" "),n("h2",{attrs:{id:"_3-3-删除文档"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-删除文档"}},[s._v("#")]),s._v(" 3.3.删除文档")]),s._v(" "),n("p",[s._v("删除使用DELETE请求，同样，需要根据id进行删除：")]),s._v(" "),n("p",[n("strong",[s._v("语法：")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DELETE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("索引库名"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("_doc"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("id值\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("strong",[s._v("示例：")])]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("# 根据id删除数据\nDELETE /heima/_doc/"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[n("strong",[s._v("结果：")])]),s._v(" "),n("p",[n("img",{attrs:{src:a(1282),alt:"image-20210720213634918"}})]),s._v(" "),n("h2",{attrs:{id:"_3-4-修改文档"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-修改文档"}},[s._v("#")]),s._v(" 3.4.修改文档")]),s._v(" "),n("p",[s._v("修改有两种方式：")]),s._v(" "),n("ul",[n("li",[s._v("全量修改：直接覆盖原来的文档")]),s._v(" "),n("li",[s._v("增量修改：修改文档中的部分字段")])]),s._v(" "),n("h3",{attrs:{id:"_3-4-1-全量修改"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-1-全量修改"}},[s._v("#")]),s._v(" 3.4.1.全量修改")]),s._v(" "),n("p",[s._v("全量修改是覆盖原来的文档，其本质是：")]),s._v(" "),n("ul",[n("li",[s._v("根据指定的id删除文档")]),s._v(" "),n("li",[s._v("新增一个相同id的文档")])]),s._v(" "),n("p",[n("strong",[s._v("注意")]),s._v("：如果根据id删除时，id不存在，第二步的新增也会执行，也就从修改变成了新增操作了。")]),s._v(" "),n("p",[n("strong",[s._v("语法：")])]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("PUT /"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("索引库名"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("/_doc/文档id\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"字段1"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"值1"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"字段2"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"值2"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ... 略")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[n("strong",[s._v("示例：")])]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("PUT /heima/_doc/"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"info"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"黑马程序员高级Java讲师"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"email"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zy@itcast.cn"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"firstName"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"云"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"lastName"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"赵"')]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h3",{attrs:{id:"_3-4-2-增量修改"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-2-增量修改"}},[s._v("#")]),s._v(" 3.4.2.增量修改")]),s._v(" "),n("p",[s._v("增量修改是只修改指定id匹配的文档中的部分字段。")]),s._v(" "),n("p",[n("strong",[s._v("语法：")])]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("POST /"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("索引库名"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("/_update/文档id\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"doc"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n         "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"字段名"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"新的值"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[n("strong",[s._v("示例：")])]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("POST /heima/_update/"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"doc"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"email"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ZhaoYun@itcast.cn"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h2",{attrs:{id:"_3-5-总结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-总结"}},[s._v("#")]),s._v(" 3.5.总结")]),s._v(" "),n("p",[s._v("文档操作有哪些？")]),s._v(" "),n("ul",[n("li",[s._v("创建文档：POST /{索引库名}/_doc/文档id   { json文档 }")]),s._v(" "),n("li",[s._v("查询文档：GET /{索引库名}/_doc/文档id")]),s._v(" "),n("li",[s._v("删除文档：DELETE /{索引库名}/_doc/文档id")]),s._v(" "),n("li",[s._v("修改文档：\n"),n("ul",[n("li",[s._v("全量修改：PUT /{索引库名}/_doc/文档id { json文档 }")]),s._v(" "),n("li",[s._v('增量修改：POST /{索引库名}/_update/文档id { "doc": {字段}}')])])])]),s._v(" "),n("h1",{attrs:{id:"_4-restapi"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-restapi"}},[s._v("#")]),s._v(" 4.RestAPI")]),s._v(" "),n("p",[s._v("ES官方提供了各种不同语言的客户端，用来操作ES。这些客户端的本质就是组装DSL语句，通过http请求发送给ES。官方文档地址：https://www.elastic.co/guide/en/elasticsearch/client/index.html")]),s._v(" "),n("p",[s._v("其中的Java Rest Client又包括两种：")]),s._v(" "),n("ul",[n("li",[s._v("Java Low Level Rest Client")]),s._v(" "),n("li",[s._v("Java High Level Rest Client")])]),s._v(" "),n("p",[n("img",{attrs:{src:a(1283),alt:"image-20210720214555863"}})]),s._v(" "),n("p",[s._v("我们学习的是Java HighLevel Rest Client客户端API")]),s._v(" "),n("h2",{attrs:{id:"_4-0-导入demo工程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-0-导入demo工程"}},[s._v("#")]),s._v(" 4.0.导入Demo工程")]),s._v(" "),n("h3",{attrs:{id:"_4-0-1-导入数据"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-0-1-导入数据"}},[s._v("#")]),s._v(" 4.0.1.导入数据")]),s._v(" "),n("p",[s._v("首先导入课前资料提供的数据库数据：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1284),alt:"image-20210720220400297"}})]),s._v(" "),n("p",[s._v("数据结构如下：")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("tb_hotel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bigint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'酒店id'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'酒店名称；例：7天酒店'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("address"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'酒店地址；例：航头路'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("price"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'酒店价格；例：329'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("score"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'酒店评分；例：45，就是4.5分'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("brand"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'酒店品牌；例：如家'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("city"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'所在城市；例：上海'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("star_name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'酒店星级，从低到高分别是：1星到5星，1钻到5钻'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("business"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'商圈；例：虹桥'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("latitude"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'纬度；例：31.2497'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("longitude"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'经度；例：120.3925'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("pic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'酒店图片；例:/img/1.jpg'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENGINE")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("InnoDB")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CHARSET")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8mb4"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("h3",{attrs:{id:"_4-0-2-导入项目"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-0-2-导入项目"}},[s._v("#")]),s._v(" 4.0.2.导入项目")]),s._v(" "),n("p",[s._v("然后导入课前资料提供的项目:")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1285),alt:"image-20210720220503411"}})]),s._v(" "),n("p",[s._v("项目结构如图：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1286),alt:"image-20210720220647541"}})]),s._v(" "),n("h3",{attrs:{id:"_4-0-3-mapping映射分析"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-0-3-mapping映射分析"}},[s._v("#")]),s._v(" 4.0.3.mapping映射分析")]),s._v(" "),n("p",[s._v("创建索引库，最关键的是mapping映射，而mapping映射要考虑的信息包括：")]),s._v(" "),n("ul",[n("li",[s._v("字段名")]),s._v(" "),n("li",[s._v("字段数据类型")]),s._v(" "),n("li",[s._v("是否参与搜索")]),s._v(" "),n("li",[s._v("是否需要分词")]),s._v(" "),n("li",[s._v("如果分词，分词器是什么？")])]),s._v(" "),n("p",[s._v("其中：")]),s._v(" "),n("ul",[n("li",[s._v("字段名、字段数据类型，可以参考数据表结构的名称和类型")]),s._v(" "),n("li",[s._v("是否参与搜索要分析业务来判断，例如图片地址，就无需参与搜索")]),s._v(" "),n("li",[s._v("是否分词呢要看内容，内容如果是一个整体就无需分词，反之则要分词")]),s._v(" "),n("li",[s._v("分词器，我们可以统一使用ik_max_word")])]),s._v(" "),n("p",[s._v("来看下酒店数据的索引库结构:")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("PUT /hotel\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"mappings"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"properties"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"id"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"keyword"')]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"text"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"analyzer"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ik_max_word"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"copy_to"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"all"')]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"address"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"keyword"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"index"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"price"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"integer"')]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"score"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"integer"')]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"brand"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"keyword"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"copy_to"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"all"')]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"city"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"keyword"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"copy_to"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"all"')]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"starName"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"keyword"')]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"business"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"keyword"')]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"location"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"geo_point"')]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"pic"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"keyword"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"index"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"all"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"text"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"analyzer"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ik_max_word"')]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br")])]),n("p",[s._v("几个特殊字段说明：")]),s._v(" "),n("ul",[n("li",[s._v("location：地理坐标，里面包含精度、纬度")]),s._v(" "),n("li",[s._v("all：一个组合字段，其目的是将多字段的值 利用copy_to合并，提供给用户搜索")])]),s._v(" "),n("p",[s._v("地理坐标说明：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1287),alt:"image-20210720222110126"}})]),s._v(" "),n("p",[s._v("copy_to说明：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1288),alt:"image-20210720222221516"}})]),s._v(" "),n("h3",{attrs:{id:"_4-0-4-初始化restclient"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-0-4-初始化restclient"}},[s._v("#")]),s._v(" 4.0.4.初始化RestClient")]),s._v(" "),n("p",[s._v("在elasticsearch提供的API中，与elasticsearch一切交互都封装在一个名为RestHighLevelClient的类中，必须先完成这个对象的初始化，建立与elasticsearch的连接。")]),s._v(" "),n("p",[s._v("分为三步：")]),s._v(" "),n("p",[s._v("1）引入es的RestHighLevelClient依赖：")]),s._v(" "),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("org.elasticsearch.client"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("elasticsearch-rest-high-level-client"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("2）因为SpringBoot默认的ES版本是7.6.2，所以我们需要覆盖默认的ES版本：")]),s._v(" "),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("properties")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("java.version")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("1.8"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("java.version")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("elasticsearch.version")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("7.12.1"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("elasticsearch.version")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("properties")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("3）初始化RestHighLevelClient：")]),s._v(" "),n("p",[s._v("初始化的代码如下：")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RestHighLevelClient")]),s._v(" client "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RestHighLevelClient")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RestClient")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("builder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HttpHost")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("create")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://192.168.150.101:9200"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("这里为了单元测试方便，我们创建一个测试类HotelIndexTest，然后将初始化的代码编写在@BeforeEach方法中：")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("cn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("itcast"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hotel")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token import"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("org"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("apache"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("http"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HttpHost")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token import"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("org"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("elasticsearch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("client"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RestHighLevelClient")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token import"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("org"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("junit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jupiter"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("api"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AfterEach")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token import"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("org"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("junit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jupiter"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("api"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BeforeEach")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token import"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("org"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("junit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jupiter"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("api"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Test")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token import"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("java"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("io"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HotelIndexTest")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RestHighLevelClient")]),s._v(" client"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@BeforeEach")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setUp")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("client "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RestHighLevelClient")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RestClient")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("builder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HttpHost")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("create")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://192.168.150.101:9200"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@AfterEach")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tearDown")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("client"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("close")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])]),n("h2",{attrs:{id:"_4-1-创建索引库"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-创建索引库"}},[s._v("#")]),s._v(" 4.1.创建索引库")]),s._v(" "),n("h3",{attrs:{id:"_4-1-1-代码解读"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-1-代码解读"}},[s._v("#")]),s._v(" 4.1.1.代码解读")]),s._v(" "),n("p",[s._v("创建索引库的API如下：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1289),alt:"image-20210720223049408"}})]),s._v(" "),n("p",[s._v("代码分为三步：")]),s._v(" "),n("ul",[n("li",[s._v("1）创建Request对象。因为是创建索引库的操作，因此Request是CreateIndexRequest。")]),s._v(" "),n("li",[s._v("2）添加请求参数，其实就是DSL的JSON参数部分。因为json字符串很长，这里是定义了静态字符串常量MAPPING_TEMPLATE，让代码看起来更加优雅。")]),s._v(" "),n("li",[s._v("3）发送请求，client.indices()方法的返回值是IndicesClient类型，封装了所有与索引库操作有关的方法。")])]),s._v(" "),n("h3",{attrs:{id:"_4-1-2-完整示例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-2-完整示例"}},[s._v("#")]),s._v(" 4.1.2.完整示例")]),s._v(" "),n("p",[s._v("在hotel-demo的cn.itcast.hotel.constants包下，创建一个类，定义mapping映射的JSON字符串常量：")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("cn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("itcast"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hotel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("constants")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HotelConstants")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MAPPING_TEMPLATE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"  \\"mappings\\": {\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"    \\"properties\\": {\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"      \\"id\\": {\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"        \\"type\\": \\"keyword\\"\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"      },\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"      \\"name\\":{\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"        \\"type\\": \\"text\\",\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"        \\"analyzer\\": \\"ik_max_word\\",\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"        \\"copy_to\\": \\"all\\"\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"      },\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"      \\"address\\":{\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"        \\"type\\": \\"keyword\\",\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"        \\"index\\": false\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"      },\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"      \\"price\\":{\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"        \\"type\\": \\"integer\\"\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"      },\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"      \\"score\\":{\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"        \\"type\\": \\"integer\\"\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"      },\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"      \\"brand\\":{\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"        \\"type\\": \\"keyword\\",\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"        \\"copy_to\\": \\"all\\"\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"      },\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"      \\"city\\":{\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"        \\"type\\": \\"keyword\\",\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"        \\"copy_to\\": \\"all\\"\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"      },\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"      \\"starName\\":{\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"        \\"type\\": \\"keyword\\"\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"      },\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"      \\"business\\":{\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"        \\"type\\": \\"keyword\\"\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"      },\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"      \\"location\\":{\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"        \\"type\\": \\"geo_point\\"\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"      },\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"      \\"pic\\":{\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"        \\"type\\": \\"keyword\\",\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"        \\"index\\": false\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"      },\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"      \\"all\\":{\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"        \\"type\\": \\"text\\",\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"        \\"analyzer\\": \\"ik_max_word\\"\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"      }\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"    }\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"  }\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"}"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br")])]),n("p",[s._v("在hotel-demo中的HotelIndexTest测试类中，编写单元测试，实现创建索引：")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("createHotelIndex")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1.创建Request对象")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CreateIndexRequest")]),s._v(" request "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CreateIndexRequest")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hotel"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2.准备请求的参数：DSL语句")]),s._v("\n    request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("source")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MAPPING_TEMPLATE")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("XContentType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JSON")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3.发送请求")]),s._v("\n    client"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("indices")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("create")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestOptions")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DEFAULT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h2",{attrs:{id:"_4-2-删除索引库"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-删除索引库"}},[s._v("#")]),s._v(" 4.2.删除索引库")]),s._v(" "),n("p",[s._v("删除索引库的DSL语句非常简单：")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("DELETE /hotel\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("与创建索引库相比：")]),s._v(" "),n("ul",[n("li",[s._v("请求方式从PUT变为DELTE")]),s._v(" "),n("li",[s._v("请求路径不变")]),s._v(" "),n("li",[s._v("无请求参数")])]),s._v(" "),n("p",[s._v("所以代码的差异，注意体现在Request对象上。依然是三步走：")]),s._v(" "),n("ul",[n("li",[s._v("1）创建Request对象。这次是DeleteIndexRequest对象")]),s._v(" "),n("li",[s._v("2）准备参数。这里是无参")]),s._v(" "),n("li",[s._v("3）发送请求。改用delete方法")])]),s._v(" "),n("p",[s._v("在hotel-demo中的HotelIndexTest测试类中，编写单元测试，实现删除索引：")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("testDeleteHotelIndex")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1.创建Request对象")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DeleteIndexRequest")]),s._v(" request "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DeleteIndexRequest")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hotel"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2.发送请求")]),s._v("\n    client"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("indices")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("delete")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestOptions")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DEFAULT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h2",{attrs:{id:"_4-3-判断索引库是否存在"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-判断索引库是否存在"}},[s._v("#")]),s._v(" 4.3.判断索引库是否存在")]),s._v(" "),n("p",[s._v("判断索引库是否存在，本质就是查询，对应的DSL是：")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("GET /hotel\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("因此与删除的Java代码流程是类似的。依然是三步走：")]),s._v(" "),n("ul",[n("li",[s._v("1）创建Request对象。这次是GetIndexRequest对象")]),s._v(" "),n("li",[s._v("2）准备参数。这里是无参")]),s._v(" "),n("li",[s._v("3）发送请求。改用exists方法")])]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("testExistsHotelIndex")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1.创建Request对象")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GetIndexRequest")]),s._v(" request "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GetIndexRequest")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hotel"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2.发送请求")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" exists "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" client"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("indices")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("exists")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestOptions")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DEFAULT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3.输出")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("exists "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"索引库已经存在！"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"索引库不存在！"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h2",{attrs:{id:"_4-4-总结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-总结"}},[s._v("#")]),s._v(" 4.4.总结")]),s._v(" "),n("p",[s._v("JavaRestClient操作elasticsearch的流程基本类似。核心是client.indices()方法来获取索引库的操作对象。")]),s._v(" "),n("p",[s._v("索引库操作的基本步骤：")]),s._v(" "),n("ul",[n("li",[s._v("初始化RestHighLevelClient")]),s._v(" "),n("li",[s._v("创建XxxIndexRequest。XXX是Create、Get、Delete")]),s._v(" "),n("li",[s._v("准备DSL（ Create时需要，其它是无参）")]),s._v(" "),n("li",[s._v("发送请求。调用RestHighLevelClient#indices().xxx()方法，xxx是create、exists、delete")])]),s._v(" "),n("h1",{attrs:{id:"_5-restclient操作文档"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-restclient操作文档"}},[s._v("#")]),s._v(" 5.RestClient操作文档")]),s._v(" "),n("p",[s._v("为了与索引库操作分离，我们再次参加一个测试类，做两件事情：")]),s._v(" "),n("ul",[n("li",[s._v("初始化RestHighLevelClient")]),s._v(" "),n("li",[s._v("我们的酒店数据在数据库，需要利用IHotelService去查询，所以注入这个接口")])]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("cn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("itcast"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hotel")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token import"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("cn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("itcast"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hotel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("pojo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Hotel")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token import"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("cn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("itcast"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hotel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("service"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IHotelService")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token import"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("org"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("junit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jupiter"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("api"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AfterEach")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token import"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("org"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("junit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jupiter"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("api"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BeforeEach")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token import"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("org"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("junit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jupiter"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("api"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Test")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token import"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("org"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("springframework"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("beans"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("factory"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("annotation"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Autowired")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token import"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("org"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("springframework"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("boot"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("test"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SpringBootTest")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token import"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("java"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("io"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token import"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("java"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("util"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("List")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@SpringBootTest")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HotelDocumentTest")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Autowired")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IHotelService")]),s._v(" hotelService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RestHighLevelClient")]),s._v(" client"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@BeforeEach")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setUp")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("client "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RestHighLevelClient")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RestClient")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("builder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HttpHost")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("create")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://192.168.150.101:9200"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@AfterEach")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tearDown")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("client"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("close")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br")])]),n("h2",{attrs:{id:"_5-1-新增文档"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-新增文档"}},[s._v("#")]),s._v(" 5.1.新增文档")]),s._v(" "),n("p",[s._v("我们要将数据库的酒店数据查询出来，写入elasticsearch中。")]),s._v(" "),n("h3",{attrs:{id:"_5-1-1-索引库实体类"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-1-索引库实体类"}},[s._v("#")]),s._v(" 5.1.1.索引库实体类")]),s._v(" "),n("p",[s._v("数据库查询后的结果是一个Hotel类型的对象。结构如下：")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Data")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@TableName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tb_hotel"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Hotel")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@TableId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("type "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IdType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("INPUT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),s._v(" id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" address"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Integer")]),s._v(" price"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Integer")]),s._v(" score"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" brand"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" city"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" starName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" business"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" longitude"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" latitude"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" pic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("p",[s._v("与我们的索引库结构存在差异：")]),s._v(" "),n("ul",[n("li",[s._v("longitude和latitude需要合并为location")])]),s._v(" "),n("p",[s._v("因此，我们需要定义一个新的类型，与索引库结构吻合：")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("cn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("itcast"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hotel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("pojo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token import"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("lombok"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Data")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token import"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("lombok"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("NoArgsConstructor")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Data")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@NoArgsConstructor")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HotelDoc")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),s._v(" id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" address"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Integer")]),s._v(" price"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Integer")]),s._v(" score"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" brand"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" city"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" starName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" business"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" location"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" pic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HotelDoc")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Hotel")]),s._v(" hotel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" hotel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" hotel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("address "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" hotel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getAddress")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("price "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" hotel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getPrice")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("score "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" hotel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getScore")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("brand "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" hotel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getBrand")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("city "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" hotel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getCity")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("starName "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" hotel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getStarName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("business "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" hotel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getBusiness")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("location "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" hotel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getLatitude")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('", "')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" hotel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getLongitude")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("pic "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" hotel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getPic")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br")])]),n("h3",{attrs:{id:"_5-1-2-语法说明"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-2-语法说明"}},[s._v("#")]),s._v(" 5.1.2.语法说明")]),s._v(" "),n("p",[s._v("新增文档的DSL语句如下：")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("POST /"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("索引库名"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("/_doc/"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Jack"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"age"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("对应的java代码如图：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1290),alt:"image-20210720230027240"}})]),s._v(" "),n("p",[s._v("可以看到与创建索引库类似，同样是三步走：")]),s._v(" "),n("ul",[n("li",[s._v("1）创建Request对象")]),s._v(" "),n("li",[s._v("2）准备请求参数，也就是DSL中的JSON文档")]),s._v(" "),n("li",[s._v("3）发送请求")])]),s._v(" "),n("p",[s._v("变化的地方在于，这里直接使用client.xxx()的API，不再需要client.indices()了。")]),s._v(" "),n("h3",{attrs:{id:"_5-1-3-完整代码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-3-完整代码"}},[s._v("#")]),s._v(" 5.1.3.完整代码")]),s._v(" "),n("p",[s._v("我们导入酒店数据，基本流程一致，但是需要考虑几点变化：")]),s._v(" "),n("ul",[n("li",[s._v("酒店数据来自于数据库，我们需要先查询出来，得到hotel对象")]),s._v(" "),n("li",[s._v("hotel对象需要转为HotelDoc对象")]),s._v(" "),n("li",[s._v("HotelDoc需要序列化为json格式")])]),s._v(" "),n("p",[s._v("因此，代码整体步骤如下：")]),s._v(" "),n("ul",[n("li",[s._v("1）根据id查询酒店数据Hotel")]),s._v(" "),n("li",[s._v("2）将Hotel封装为HotelDoc")]),s._v(" "),n("li",[s._v("3）将HotelDoc序列化为JSON")]),s._v(" "),n("li",[s._v("4）创建IndexRequest，指定索引库名和id")]),s._v(" "),n("li",[s._v("5）准备请求参数，也就是JSON文档")]),s._v(" "),n("li",[s._v("6）发送请求")])]),s._v(" "),n("p",[s._v("在hotel-demo的HotelDocumentTest测试类中，编写单元测试：")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("testAddDocument")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1.根据id查询酒店数据")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Hotel")]),s._v(" hotel "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" hotelService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("61083L")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2.转换为文档类型")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HotelDoc")]),s._v(" hotelDoc "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HotelDoc")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hotel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3.将HotelDoc转json")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" json "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JSON")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("toJSONString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hotelDoc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1.准备Request对象")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IndexRequest")]),s._v(" request "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IndexRequest")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hotel"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hotelDoc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2.准备Json文档")]),s._v("\n    request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("source")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("json"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("XContentType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JSON")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3.发送请求")]),s._v("\n    client"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("index")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestOptions")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DEFAULT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("h2",{attrs:{id:"_5-2-查询文档"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-查询文档"}},[s._v("#")]),s._v(" 5.2.查询文档")]),s._v(" "),n("h3",{attrs:{id:"_5-2-1-语法说明"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-1-语法说明"}},[s._v("#")]),s._v(" 5.2.1.语法说明")]),s._v(" "),n("p",[s._v("查询的DSL语句如下：")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("GET /hotel/_doc/"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("非常简单，因此代码大概分两步：")]),s._v(" "),n("ul",[n("li",[s._v("准备Request对象")]),s._v(" "),n("li",[s._v("发送请求")])]),s._v(" "),n("p",[s._v("不过查询的目的是得到结果，解析为HotelDoc，因此难点是结果的解析。完整代码如下：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1291),alt:"image-20210720230811674"}})]),s._v(" "),n("p",[s._v("可以看到，结果是一个JSON，其中文档放在一个"),n("code",[s._v("_source")]),s._v("属性中，因此解析就是拿到"),n("code",[s._v("_source")]),s._v("，反序列化为Java对象即可。")]),s._v(" "),n("p",[s._v("与之前类似，也是三步走：")]),s._v(" "),n("ul",[n("li",[s._v("1）准备Request对象。这次是查询，所以是GetRequest")]),s._v(" "),n("li",[s._v("2）发送请求，得到结果。因为是查询，这里调用client.get()方法")]),s._v(" "),n("li",[s._v("3）解析结果，就是对JSON做反序列化")])]),s._v(" "),n("h3",{attrs:{id:"_5-2-2-完整代码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-2-完整代码"}},[s._v("#")]),s._v(" 5.2.2.完整代码")]),s._v(" "),n("p",[s._v("在hotel-demo的HotelDocumentTest测试类中，编写单元测试：")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("testGetDocumentById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1.准备Request")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GetRequest")]),s._v(" request "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GetRequest")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hotel"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"61082"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2.发送请求，得到响应")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GetResponse")]),s._v(" response "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" client"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestOptions")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DEFAULT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3.解析响应结果")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" json "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getSourceAsString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HotelDoc")]),s._v(" hotelDoc "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JSON")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("parseObject")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("json"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HotelDoc")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hotelDoc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("h2",{attrs:{id:"_5-3-删除文档"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-删除文档"}},[s._v("#")]),s._v(" 5.3.删除文档")]),s._v(" "),n("p",[s._v("删除的DSL为是这样的：")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("DELETE /hotel/_doc/"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("与查询相比，仅仅是请求方式从DELETE变成GET，可以想象Java代码应该依然是三步走：")]),s._v(" "),n("ul",[n("li",[s._v("1）准备Request对象，因为是删除，这次是DeleteRequest对象。要指定索引库名和id")]),s._v(" "),n("li",[s._v("2）准备参数，无参")]),s._v(" "),n("li",[s._v("3）发送请求。因为是删除，所以是client.delete()方法")])]),s._v(" "),n("p",[s._v("在hotel-demo的HotelDocumentTest测试类中，编写单元测试：")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("testDeleteDocument")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1.准备Request")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DeleteRequest")]),s._v(" request "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DeleteRequest")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hotel"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"61083"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2.发送请求")]),s._v("\n    client"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("delete")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestOptions")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DEFAULT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h2",{attrs:{id:"_5-4-修改文档"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-修改文档"}},[s._v("#")]),s._v(" 5.4.修改文档")]),s._v(" "),n("h3",{attrs:{id:"_5-4-1-语法说明"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-1-语法说明"}},[s._v("#")]),s._v(" 5.4.1.语法说明")]),s._v(" "),n("p",[s._v("修改我们讲过两种方式：")]),s._v(" "),n("ul",[n("li",[s._v("全量修改：本质是先根据id删除，再新增")]),s._v(" "),n("li",[s._v("增量修改：修改文档中的指定字段值")])]),s._v(" "),n("p",[s._v("在RestClient的API中，全量修改与新增的API完全一致，判断依据是ID：")]),s._v(" "),n("ul",[n("li",[s._v("如果新增时，ID已经存在，则修改")]),s._v(" "),n("li",[s._v("如果新增时，ID不存在，则新增")])]),s._v(" "),n("p",[s._v("这里不再赘述，我们主要关注增量修改。")]),s._v(" "),n("p",[s._v("代码示例如图：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1292),alt:"image-20210720231040875"}})]),s._v(" "),n("p",[s._v("与之前类似，也是三步走：")]),s._v(" "),n("ul",[n("li",[s._v("1）准备Request对象。这次是修改，所以是UpdateRequest")]),s._v(" "),n("li",[s._v("2）准备参数。也就是JSON文档，里面包含要修改的字段")]),s._v(" "),n("li",[s._v("3）更新文档。这里调用client.update()方法")])]),s._v(" "),n("h3",{attrs:{id:"_5-4-2-完整代码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-2-完整代码"}},[s._v("#")]),s._v(" 5.4.2.完整代码")]),s._v(" "),n("p",[s._v("在hotel-demo的HotelDocumentTest测试类中，编写单元测试：")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("testUpdateDocument")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1.准备Request")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UpdateRequest")]),s._v(" request "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UpdateRequest")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hotel"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"61083"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2.准备请求参数")]),s._v("\n    request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("doc")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"price"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"952"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"starName"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"四钻"')]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3.发送请求")]),s._v("\n    client"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("update")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestOptions")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DEFAULT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("h2",{attrs:{id:"_5-5-批量导入文档"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-批量导入文档"}},[s._v("#")]),s._v(" 5.5.批量导入文档")]),s._v(" "),n("p",[s._v("案例需求：利用BulkRequest批量将数据库数据导入到索引库中。")]),s._v(" "),n("p",[s._v("步骤如下：")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("利用mybatis-plus查询酒店数据")])]),s._v(" "),n("li",[n("p",[s._v("将查询到的酒店数据（Hotel）转换为文档类型数据（HotelDoc）")])]),s._v(" "),n("li",[n("p",[s._v("利用JavaRestClient中的BulkRequest批处理，实现批量新增文档")])])]),s._v(" "),n("h3",{attrs:{id:"_5-5-1-语法说明"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-1-语法说明"}},[s._v("#")]),s._v(" 5.5.1.语法说明")]),s._v(" "),n("p",[s._v("批量处理BulkRequest，其本质就是将多个普通的CRUD请求组合在一起发送。")]),s._v(" "),n("p",[s._v("其中提供了一个add方法，用来添加其他请求：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1293),alt:"image-20210720232105943"}})]),s._v(" "),n("p",[s._v("可以看到，能添加的请求包括：")]),s._v(" "),n("ul",[n("li",[s._v("IndexRequest，也就是新增")]),s._v(" "),n("li",[s._v("UpdateRequest，也就是修改")]),s._v(" "),n("li",[s._v("DeleteRequest，也就是删除")])]),s._v(" "),n("p",[s._v("因此Bulk中添加了多个IndexRequest，就是批量新增功能了。示例：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1294),alt:"image-20210720232431383"}})]),s._v(" "),n("p",[s._v("其实还是三步走：")]),s._v(" "),n("ul",[n("li",[s._v("1）创建Request对象。这里是BulkRequest")]),s._v(" "),n("li",[s._v("2）准备参数。批处理的参数，就是其它Request对象，这里就是多个IndexRequest")]),s._v(" "),n("li",[s._v("3）发起请求。这里是批处理，调用的方法为client.bulk()方法")])]),s._v(" "),n("p",[s._v("我们在导入酒店数据时，将上述代码改造成for循环处理即可。")]),s._v(" "),n("h3",{attrs:{id:"_5-5-2-完整代码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-2-完整代码"}},[s._v("#")]),s._v(" 5.5.2.完整代码")]),s._v(" "),n("p",[s._v("在hotel-demo的HotelDocumentTest测试类中，编写单元测试：")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("testBulkRequest")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 批量查询酒店数据")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("List")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Hotel")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" hotels "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" hotelService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("list")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1.创建Request")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BulkRequest")]),s._v(" request "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BulkRequest")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2.准备参数，添加多个新增的Request")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Hotel")]),s._v(" hotel "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" hotels"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2.1.转换为文档类型HotelDoc")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HotelDoc")]),s._v(" hotelDoc "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HotelDoc")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hotel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2.2.创建新增文档的Request对象")]),s._v("\n        request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IndexRequest")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hotel"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hotelDoc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("source")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JSON")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("toJSONString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hotelDoc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("XContentType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JSON")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3.发送请求")]),s._v("\n    client"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("bulk")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestOptions")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DEFAULT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br")])]),n("h2",{attrs:{id:"_5-6-小结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-6-小结"}},[s._v("#")]),s._v(" 5.6.小结")]),s._v(" "),n("p",[s._v("文档操作的基本步骤：")]),s._v(" "),n("ul",[n("li",[s._v("初始化RestHighLevelClient")]),s._v(" "),n("li",[s._v("创建XxxRequest。XXX是Index、Get、Update、Delete、Bulk")]),s._v(" "),n("li",[s._v("准备参数（Index、Update、Bulk时需要）")]),s._v(" "),n("li",[s._v("发送请求。调用RestHighLevelClient#.xxx()方法，xxx是index、get、update、delete、bulk")]),s._v(" "),n("li",[s._v("解析结果（Get时需要）")])])])}),[],!1,null,null,null);t.default=e.exports},376:function(s,t){s.exports="data:image/png;base64,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"}}]);